# Membersihkan environment
epicalc::zap()
# memanggil data penelitian
setwd("D:/Kuliah/Skripsi/Referensi Filariasis")
datapenelitian <- read_spss("datapenelitian.sav")
# subset data untuk Provinsi Sumatera Barat
datasumbar <- subset(datapenelitian, B1R1==13 & B4K7THN >= 15)
# cek data missing
tab1(is.na(datasumbar$B4K7THN))
tab1(is.na(datasumbar$B4K8))
tab1(is.na(datasumbar$B4K9))
tab1(is.na(datasumbar$A33))
tab1(is.na(datasumbar$B6R29B))
# recode data
# recode variabel kab/kota
print_labels(datasumbar$provkab)
datasumbar <- datasumbar |>
mutate(kabkota = case_when(
provkab == 1301 ~ 1,
provkab == 1302 ~ 2,
provkab == 1303 ~ 3,
provkab == 1304 ~ 4,
provkab == 1305 ~ 5,
provkab == 1306 ~ 6,
provkab == 1307 ~ 7,
provkab == 1308 ~ 8,
provkab == 1309 ~ 9,
provkab == 1310 ~ 10,
provkab == 1311 ~ 11,
provkab == 1312 ~ 12,
provkab == 1371 ~ 71,
provkab == 1372 ~ 72,
provkab == 1373 ~ 73,
provkab == 1374 ~ 74,
provkab == 1375 ~ 75,
provkab == 1376 ~ 76,
provkab == 1377 ~ 77)) |>
set_value_labels(kabkota = c("Kepulauan Mentawai" = 1,
"Pesisir Selatan" = 2,
"Solok" = 3,
"Sijunjung" = 4,
"Tanah Datar" = 5,
"Padang Pariaman" = 6,
"Agam" = 7,
"Lima Puluh Kota" = 8,
"Pasaman" = 9,
"Solok Selatan" = 10,
"Dharmasraya" = 11,
"Pasaman Barat" = 12,
"Kota Padang" = 71,
"Kota Solok" = 72,
"Kota Sawahlunto" = 73,
"Kota Padang Panjang" = 74,
"Kota Bukittinggi" = 75,
"Kota Payakumbuh" = 76,
"Kota Pariaman" = 77)) |>
set_variable_labels(kabkota = "Kabupaten/Kota")
# recode variabel wilayah tempat tinggal
print_labels(datasumbar$B1R5) # cek kategori variabel klasifikasi wilayah tempat tinggal
datasumbar <- datasumbar |>
mutate(wilayah =
ifelse(B1R5 == 2, 0, 1)) |>
set_value_labels(wilayah = c(Perdesaan = 0, Perkotaan = 1)) |>
set_variable_labels(wilayah = "Tempat Tinggal")
# recode variabel jenis kelamin
print_labels(datasumbar$B4K4) # cek kategori variabel jenis kelamin
datasumbar <- datasumbar |>
mutate(jk =
ifelse(B4K4 == 1, 0, 1)) |>
set_value_labels(jk = c("Laki-laki" = 0, Perempuan = 1)) |>
set_variable_labels(jk = "Jenis Kelamin")
# recode variabel usia
datasumbar <- datasumbar |>
mutate(usia = case_when(
B4K7THN >= 30 ~ 0,
B4K7THN <30 ~ 1)) |>
set_value_labels(usia = c("<30 Tahun" = 1, "≥30 Tahun" = 0)) |>
set_variable_labels(usia = "Usia")
# recode variabel status pendidikan
print_labels(datasumbar$B4K8) # cek kategori variabel status pendidikan
datasumbar <- datasumbar |>
mutate(didik =
case_when(B4K8 >= 1 & B4K8 <= 4 ~ 0,
B4K8 >= 5 ~ 1)) |>
set_value_labels(didik = c(Rendah =  0, Tinggi = 1)) |>
set_variable_labels(didik = "Pendidikan")
# recode variabel status pekerjaan
print_labels(datasumbar$B4K9) # cek kategori variabel status pekerjaan
datasumbar <- datasumbar |>
mutate(pekerjaan =
case_when(B4K9 >= 1 & B4K9 <= 2 ~ 1,
B4K9 == 9 ~ 1,
B4K9 >= 3 & B4K9 <= 8 ~ 0)) |>
set_value_labels(pekerjaan = c("Risiko Tinggi" = 0, "Risiko Rendah" = 1)) |>
set_variable_labels(pekerjaan = "Pekerjaan")
# recode variabel status filariasis
print_labels(datasumbar$A33) # cek kategori variabel status filariasis
tab1(datasumbar$A33)
datasumbar <- datasumbar |>
mutate(filariasis =
ifelse(A33 == 4, 1, 0)) |>
set_value_labels(filariasis = c(Ya = 0, Tidak = 1)) |>
set_variable_labels(filariasis = "Filariasis")
# recode variabel status penggunaan kelambu
print_labels(datasumbar$G01A)
print_labels(datasumbar$G01B)
print_labels(datasumbar$G01C)
datasumbar <- datasumbar |>
mutate(kelambu = case_when(G01A == 2 & G01B == 2 & G01C == 2 ~ 0,
TRUE ~ 1)) |>
set_value_labels(kelambu = c(Tidak = 0, Ya = 1)) |>
set_variable_labels(kelambu = "Penggunaan Kelambu")
# recode variabel status penggunaan obat nyamuk
print_labels(datasumbar$G01E) # cek kategori variabel status penggunaan obat nyamuk
datasumbar <- datasumbar |>
mutate(obatnyamuk =
ifelse(G01E == 1, 1, 0)) |>
set_value_labels(obatnyamuk = c(Tidak = 0, Ya = 1)) |>
set_variable_labels(obatnyamuk = "Penggunaan Obat Nyamuk")
# recode variabel status penggunaan kasa nyamuk pada ventilasi rumah
print_labels(datasumbar$B6R29B) # cek kategori status penggunaan kasa nyamuk pada ventilasi rumah
datasumbar <- datasumbar |>
mutate(kasanyamuk = case_when(
B6R29B == 1 ~ 1,
B6R29B == 2 ~ 0,
TRUE ~ NA_real_)) |>
set_value_labels(kasanyamuk = c(Tidak = 0, Ya = 1)) |>
set_variable_labels(kasanyamuk = "Penggunaan Kasa Nyamuk")
# cek data missing setelah recoding
tab1(is.na(datasumbar$wilayah))
tab1(is.na(datasumbar$jk))
tab1(is.na(datasumbar$usia))
tab1(is.na(datasumbar$didik))
tab1(is.na(datasumbar$pekerjaan))
tab1(is.na(datasumbar$filariasis))
tab1(is.na(datasumbar$kelambu))
tab1(is.na(datasumbar$obatnyamuk))
tab1(is.na(datasumbar$kasanyamuk))
tab1(is.na(datasumbar$kabkota))
# mengeluarkan data missing
datasumbar1 <- subset(datasumbar, !is.na(datasumbar$didik) & !is.na(datasumbar$pekerjaan) &
!is.na(datasumbar$kasanyamuk)  == TRUE)
# mengeluarkan data missing
datasumbar1 <- subset(datasumbar, !is.na(datasumbar$didik) & !is.na(datasumbar$pekerjaan) &
!is.na(datasumbar$kasanyamuk)  == TRUE)
# deklarasi data survei
datasumbarfactor <- datasumbar1 |>
as_factor() # mengubah class data ke factor
targetpop <- 24786 # jumlah sampel bersih
datasumbar1adj <- datasumbarfactor %>%
mutate(Weight = w_final / sum(w_final) * targetpop)
mysurvey <- svydesign(ids = datasumbar1adj$PSU, weights = datasumbar1adj$Weight,
strata = datasumbar1adj$STRATA, nest = T,
data = datasumbar1adj)
options(survey.lonely.psu = "adjust")
# deklarasi data survei
datasumbarfactor <- datasumbar1 |>
as_factor() # mengubah class data ke factor
targetpop <- 24786 # jumlah sampel bersih
datasumbar1adj <- datasumbarfactor %>%
mutate(Weight = w_final / sum(w_final) * targetpop)
mysurvey <- svydesign(ids = datasumbar1adj$PSU, weights = datasumbar1adj$Weight,
strata = datasumbar1adj$STRATA, nest = T,
data = datasumbar1adj)
options(survey.lonely.psu = "adjust")
# Analisis Bivariat (gabungan)
mysurvey |> # level individu
tbl_svysummary(by = filariasis, percent = "row",
statistic = all_categorical() ~ "({n_unweighted} obs.) {p}%",
digits = all_categorical() ~ c(0, 1),
include = c(jk, usia, didik, pekerjaan)) |>
modify_header(label~"**Variabel**",
all_stat_cols() ~ "**{level} =** {n_unweighted} obs.")
# hubungan pendidikan dengan filariasis
biv3 <- svyglm(filariasis ~ didik,
family = binomial, design = mysurvey)
t3 <- tbl_regression(
biv3,
exponentiate = T,
add_pairwise_contrasts = T,
pairwise_reverse = F,
pvalue_fun = ~style_pvalue(.x, digits = 3)) |>
add_significance_stars(hide_p = F, hide_se = T, hide_ci = F) |>
bold_p()
t3
# Analisis Multivariat
# full model
modelawal <- svyglm(filariasis ~ usia + pekerjaan + kasanyamuk,
family = binomial,
design = mysurvey)
tabelreg1 <- tbl_regression(
modelawal,
exponentiate = T,
add_pairwise_contrasts = T,
pairwise_reverse = F,
pvalue_fun = ~style_pvalue(.x, digits = 3)) |>
add_significance_stars(hide_p = F, hide_se = T, hide_ci = F) |>
bold_p()
tabelreg1
# model pertama
modelpertama <- svyglm(filariasis ~ usia + kasanyamuk,
family = binomial,
design = mysurvey)
tabelreg2 <- tbl_regression(
modelpertama,
exponentiate = T,
add_pairwise_contrasts = T,
pairwise_reverse = F,
pvalue_fun = ~style_pvalue(.x, digits = 3)) |>
add_significance_stars(hide_p = F, hide_se = T, hide_ci = F) |>
bold_p()
tabelreg2
# set library
library(dplyr)
library(haven)
library(survey)
library(srvyr)
library(labelled)
library(epicalc)
library(gtsummary)
# memanggil data penelitian
setwd("D:/Kuliah/Skripsi/Referensi Filariasis")
datapenelitian <- read_spss("datapenelitian.sav")
# subset data untuk Provinsi Sumatera Barat
datasumbar <- subset(datapenelitian, B1R1==13 & B4K7THN >= 15)
# Membersihkan environment
epicalc::zap()
# memanggil data penelitian
setwd("D:/Kuliah/Skripsi/Referensi Filariasis")
datapenelitian <- read_spss("datapenelitian.sav")
# subset data untuk Provinsi Sumatera Barat
datasumbar <- subset(datapenelitian, B1R1==13 & B4K7THN >= 15)
# cek data missing
tab1(is.na(datasumbar$B4K7THN))
tab1(is.na(datasumbar$B4K8))
tab1(is.na(datasumbar$B4K9))
tab1(is.na(datasumbar$A33))
tab1(is.na(datasumbar$B6R29B))
# recode data
# recode variabel kab/kota
print_labels(datasumbar$provkab)
datasumbar <- datasumbar |>
mutate(kabkota = case_when(
provkab == 1301 ~ 1,
provkab == 1302 ~ 2,
provkab == 1303 ~ 3,
provkab == 1304 ~ 4,
provkab == 1305 ~ 5,
provkab == 1306 ~ 6,
provkab == 1307 ~ 7,
provkab == 1308 ~ 8,
provkab == 1309 ~ 9,
provkab == 1310 ~ 10,
provkab == 1311 ~ 11,
provkab == 1312 ~ 12,
provkab == 1371 ~ 71,
provkab == 1372 ~ 72,
provkab == 1373 ~ 73,
provkab == 1374 ~ 74,
provkab == 1375 ~ 75,
provkab == 1376 ~ 76,
provkab == 1377 ~ 77)) |>
set_value_labels(kabkota = c("Kepulauan Mentawai" = 1,
"Pesisir Selatan" = 2,
"Solok" = 3,
"Sijunjung" = 4,
"Tanah Datar" = 5,
"Padang Pariaman" = 6,
"Agam" = 7,
"Lima Puluh Kota" = 8,
"Pasaman" = 9,
"Solok Selatan" = 10,
"Dharmasraya" = 11,
"Pasaman Barat" = 12,
"Kota Padang" = 71,
"Kota Solok" = 72,
"Kota Sawahlunto" = 73,
"Kota Padang Panjang" = 74,
"Kota Bukittinggi" = 75,
"Kota Payakumbuh" = 76,
"Kota Pariaman" = 77)) |>
set_variable_labels(kabkota = "Kabupaten/Kota")
# recode variabel wilayah tempat tinggal
print_labels(datasumbar$B1R5) # cek kategori variabel klasifikasi wilayah tempat tinggal
datasumbar <- datasumbar |>
mutate(wilayah =
ifelse(B1R5 == 2, 0, 1)) |>
set_value_labels(wilayah = c(Perdesaan = 0, Perkotaan = 1)) |>
set_variable_labels(wilayah = "Tempat Tinggal")
# recode variabel jenis kelamin
print_labels(datasumbar$B4K4) # cek kategori variabel jenis kelamin
datasumbar <- datasumbar |>
mutate(jk =
ifelse(B4K4 == 1, 0, 1)) |>
set_value_labels(jk = c("Laki-laki" = 0, Perempuan = 1)) |>
set_variable_labels(jk = "Jenis Kelamin")
# recode variabel usia
datasumbar <- datasumbar |>
mutate(usia = case_when(
B4K7THN >= 30 ~ 0,
B4K7THN <30 ~ 1)) |>
set_value_labels(usia = c("<30 Tahun" = 1, "≥30 Tahun" = 0)) |>
set_variable_labels(usia = "Usia")
# recode variabel status pendidikan
print_labels(datasumbar$B4K8) # cek kategori variabel status pendidikan
datasumbar <- datasumbar |>
mutate(didik =
case_when(B4K8 >= 1 & B4K8 <= 4 ~ 0,
B4K8 >= 5 ~ 1)) |>
set_value_labels(didik = c(Rendah =  0, Tinggi = 1)) |>
set_variable_labels(didik = "Pendidikan")
# recode variabel status pekerjaan
print_labels(datasumbar$B4K9) # cek kategori variabel status pekerjaan
datasumbar <- datasumbar |>
mutate(pekerjaan =
case_when(B4K9 >= 1 & B4K9 <= 2 ~ 1,
B4K9 == 9 ~ 1,
B4K9 >= 3 & B4K9 <= 8 ~ 0)) |>
set_value_labels(pekerjaan = c("Risiko Tinggi" = 0, "Risiko Rendah" = 1)) |>
set_variable_labels(pekerjaan = "Pekerjaan")
# recode variabel status filariasis
print_labels(datasumbar$A33) # cek kategori variabel status filariasis
tab1(datasumbar$A33)
datasumbar <- datasumbar |>
mutate(filariasis =
ifelse(A33 == 4, 1, 0)) |>
set_value_labels(filariasis = c(Ya = 0, Tidak = 1)) |>
set_variable_labels(filariasis = "Filariasis")
# recode variabel status penggunaan kelambu
print_labels(datasumbar$G01A)
print_labels(datasumbar$G01B)
print_labels(datasumbar$G01C)
datasumbar <- datasumbar |>
mutate(kelambu = case_when(G01A == 2 & G01B == 2 & G01C == 2 ~ 0,
TRUE ~ 1)) |>
set_value_labels(kelambu = c(Tidak = 0, Ya = 1)) |>
set_variable_labels(kelambu = "Penggunaan Kelambu")
# recode variabel status penggunaan obat nyamuk
print_labels(datasumbar$G01E) # cek kategori variabel status penggunaan obat nyamuk
datasumbar <- datasumbar |>
mutate(obatnyamuk =
ifelse(G01E == 1, 1, 0)) |>
set_value_labels(obatnyamuk = c(Tidak = 0, Ya = 1)) |>
set_variable_labels(obatnyamuk = "Penggunaan Obat Nyamuk")
# recode variabel status penggunaan kasa nyamuk pada ventilasi rumah
print_labels(datasumbar$B6R29B) # cek kategori status penggunaan kasa nyamuk pada ventilasi rumah
datasumbar <- datasumbar |>
mutate(kasanyamuk = case_when(
B6R29B == 1 ~ 1,
B6R29B == 2 ~ 0,
TRUE ~ NA_real_)) |>
set_value_labels(kasanyamuk = c(Tidak = 0, Ya = 1)) |>
set_variable_labels(kasanyamuk = "Penggunaan Kasa Nyamuk")
# cek data missing setelah recoding
tab1(is.na(datasumbar$wilayah))
tab1(is.na(datasumbar$jk))
tab1(is.na(datasumbar$usia))
tab1(is.na(datasumbar$didik))
tab1(is.na(datasumbar$pekerjaan))
tab1(is.na(datasumbar$filariasis))
tab1(is.na(datasumbar$kelambu))
tab1(is.na(datasumbar$obatnyamuk))
tab1(is.na(datasumbar$kasanyamuk))
tab1(is.na(datasumbar$kabkota))
# mengeluarkan data missing
datasumbar1 <- subset(datasumbar, !is.na(datasumbar$didik) & !is.na(datasumbar$pekerjaan) &
!is.na(datasumbar$kasanyamuk)  == TRUE)
# deklarasi data survei
datasumbarfactor <- datasumbar1 |>
as_factor() # mengubah class data ke factor
targetpop <- 24786 # jumlah sampel bersih
datasumbar1adj <- datasumbarfactor %>%
mutate(Weight = w_final / sum(w_final) * targetpop)
mysurvey <- svydesign(ids = datasumbar1adj$PSU, weights = datasumbar1adj$Weight,
strata = datasumbar1adj$STRATA, nest = T,
data = datasumbar1adj)
options(survey.lonely.psu = "adjust")
# model pertama
modelpertama <- svyglm(filariasis ~ usia + kasanyamuk + usia * kasanyamuk,
family = binomial,
design = mysurvey)
tabelreg2 <- tbl_regression(
modelpertama,
exponentiate = T,
add_pairwise_contrasts = T,
pairwise_reverse = F,
pvalue_fun = ~style_pvalue(.x, digits = 3)) |>
add_significance_stars(hide_p = F, hide_se = T, hide_ci = F) |>
bold_p()
tabelreg2
# cek interaksi model pertama
int.1 <- svyglm(filariasis ~ usia + kasanyamuk + usia * kasanyamuk,
family = binomial,
design = mysurvey)
tabelreg2 <- tbl_regression(
int.1,
exponentiate = T,
add_pairwise_contrasts = T,
pairwise_reverse = F,
pvalue_fun = ~style_pvalue(.x, digits = 3)) |>
add_significance_stars(hide_p = F, hide_se = T, hide_ci = F) |>
bold_p()
tabelreg2
# model kedua
modelkedua <- svyglm(filariasis ~ usia,
family = binomial,
design = mysurvey)
tabelreg4 <- tbl_regression(
modelkedua,
exponentiate = T,
add_pairwise_contrasts = T,
pairwise_reverse = F,
pvalue_fun = ~style_pvalue(.x, digits = 3)) |>
add_significance_stars(hide_p = F, hide_se = T, hide_ci = F) |>
bold_p()
tabelreg4
# model pertama
modelpertama <- svyglm(filariasis ~ usia + kasanyamuk,
family = binomial,
design = mysurvey)
tabelreg2 <- tbl_regression(
modelpertama,
exponentiate = T,
add_pairwise_contrasts = T,
pairwise_reverse = F,
pvalue_fun = ~style_pvalue(.x, digits = 3)) |>
add_significance_stars(hide_p = F, hide_se = T, hide_ci = F) |>
bold_p()
tabelreg2
# Analisis Multivariat
# full model
modelawal <- svyglm(filariasis ~ usia + pekerjaan + kasanyamuk,
family = binomial,
design = mysurvey)
tabelreg1 <- tbl_regression(
modelawal,
exponentiate = T,
add_pairwise_contrasts = T,
pairwise_reverse = F,
pvalue_fun = ~style_pvalue(.x, digits = 3)) |>
add_significance_stars(hide_p = F, hide_se = T, hide_ci = F) |>
bold_p()
tabelreg1
# model pertama
modelpertama <- svyglm(filariasis ~ usia + kasanyamuk,
family = binomial,
design = mysurvey)
tabelreg2 <- tbl_regression(
modelpertama,
exponentiate = T,
add_pairwise_contrasts = T,
pairwise_reverse = F,
pvalue_fun = ~style_pvalue(.x, digits = 3)) |>
add_significance_stars(hide_p = F, hide_se = T, hide_ci = F) |>
bold_p()
tabelreg2
# cek interaksi model pertama
int.1 <- svyglm(filariasis ~ usia + kasanyamuk + usia*pekerjaan + kasanyamuk*pekerjaan,
family = binomial,
design = mysurvey)
tabelreg2 <- tbl_regression(
int.1,
exponentiate = T,
add_pairwise_contrasts = T,
pairwise_reverse = F,
pvalue_fun = ~style_pvalue(.x, digits = 3)) |>
add_significance_stars(hide_p = F, hide_se = T, hide_ci = F) |>
bold_p()
tabelreg2
# cek interaksi model pertama
int.1 <- svyglm(filariasis ~ usia + kasanyamuk + pekerjaan + usia*pekerjaan + kasanyamuk*pekerjaan,
family = binomial,
design = mysurvey)
tabelreg2 <- tbl_regression(
int.1,
exponentiate = T,
add_pairwise_contrasts = T,
pairwise_reverse = F,
pvalue_fun = ~style_pvalue(.x, digits = 3)) |>
add_significance_stars(hide_p = F, hide_se = T, hide_ci = F) |>
bold_p()
tabelreg2
# model kedua
int.2 <- svyglm(filariasis ~ usia + usia*kasanyamuk,
family = binomial,
design = mysurvey)
tabelreg5 <- tbl_regression(
int.2,
exponentiate = T,
add_pairwise_contrasts = T,
pairwise_reverse = F,
pvalue_fun = ~style_pvalue(.x, digits = 3)) |>
add_significance_stars(hide_p = F, hide_se = T, hide_ci = F) |>
bold_p()
tabelreg5
shiny::runApp('D:/Belajar Ngoding/Dashboard/Contoh/Contoh')
runApp('D:/Belajar Ngoding/Dashboard/Test/Test')
runApp('D:/Belajar Ngoding/Dashboard/Test/Test')
runApp('D:/Belajar Ngoding/Dashboard/Test')
runApp('D:/Belajar Ngoding/Dashboard/Deploy')
runApp()
rsconnect::applications()
runApp('D:/Belajar Ngoding/Dashboard/Deploy')
runApp('D:/Belajar Ngoding/Dashboard/Deploy')
runApp('D:/Belajar Ngoding/Dashboard/Deploy')
# Tuliskan ulang library tersebut dan jalankan!
library(readr)
library(readxl)
library(epicalc)
setwd("D:/Kuliah/Modul R")
# Tuliskan ulang kode tersebut dan jalankan!
data_raw <- read.csv("data_dummy_cleaning.csv")
